# ========================================
# 开发环境 Docker Compose 配置
# ========================================
# 使用方式: docker-compose up -d
# 
# 注意事项:
# 1. 本配置仅用于开发和测试环境
# 2. 使用 .env 文件管理环境变量（.env 文件不会提交到 Git）
# 3. Mock 认证功能需要在 /home/perplexica/data/config.json 中手动启用
# 4. 生产环境请使用: docker-compose -f docker-compose.prod.yaml up -d

services:
  perplexica:
    image: itzcrazykns1337/perplexica:latest
    build:
      context: .
    ports:
      - '3000:3000'
    volumes:
      - data:/home/perplexica/data
    env_file:
      - .env
    environment:
      - DATA_DIR=
    restart: unless-stopped
    depends_on:
      - searxng

  searxng:
    image: searxng/searxng:latest
    ports:
      - '4000:8080'
    volumes:
      - ./searxng-settings.yml:/etc/searxng/settings.yml
    restart: unless-stopped

volumes:
  data:
    name: 'perplexica-data'
