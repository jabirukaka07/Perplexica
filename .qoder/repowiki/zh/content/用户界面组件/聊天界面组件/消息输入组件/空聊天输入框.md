# ç©ºèŠå¤©è¾“å…¥æ¡†

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx)
- [src/components/EmptyChat.tsx](file://src/components/EmptyChat.tsx)
- [src/components/MessageInput.tsx](file://src/components/MessageInput.tsx)
- [src/components/ChatWindow.tsx](file://src/components/ChatWindow.tsx)
- [src/components/MessageInputActions/Attach.tsx](file://src/components/MessageInputActions/Attach.tsx)
- [src/components/MessageInputActions/Sources.tsx](file://src/components/MessageInputActions/Sources.tsx)
- [src/components/MessageInputActions/Optimization.tsx](file://src/components/MessageInputActions/Optimization.tsx)
- [src/components/MessageInputActions/ChatModelSelector.tsx](file://src/components/MessageInputActions/ChatModelSelector.tsx)
- [src/lib/hooks/useChat.tsx](file://src/lib/hooks/useChat.tsx)
- [src/app/c/[chatId]/page.tsx](file://src/app/c/[chatId]/page.tsx)
- [src/app/globals.css](file://src/app/globals.css)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–å…³ç³»åˆ†æ](#ä¾èµ–å…³ç³»åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)

## ç®€ä»‹

EmptyChatMessageInput æ˜¯ Perplexica åº”ç”¨ä¸­çš„ä¸€ä¸ªä¸“é—¨ç»„ä»¶ï¼Œç”¨äºå¤„ç†æ²¡æœ‰å†å²è®°å½•æ—¶çš„èŠå¤©æ¶ˆæ¯è¾“å…¥åœºæ™¯ã€‚è¯¥ç»„ä»¶åœ¨ç”¨æˆ·é¦–æ¬¡è¿›å…¥èŠå¤©ç•Œé¢æˆ–èŠå¤©å†å²ä¸ºç©ºæ—¶æ˜¾ç¤ºï¼Œæä¾›ç®€åŒ–çš„è¾“å…¥ä½“éªŒï¼Œä¸ä¸»æ¶ˆæ¯è¾“å…¥æ¡†ï¼ˆMessageInputï¼‰å½¢æˆå·®å¼‚åŒ–è®¾è®¡ã€‚

è¯¥ç»„ä»¶çš„æ ¸å¿ƒç‰¹ç‚¹åŒ…æ‹¬ï¼š
- ä¸“ä¸ºç©ºèŠå¤©åœºæ™¯è®¾è®¡çš„ç®€åŒ–å¸ƒå±€
- é›†æˆå¤šç§è¾“å…¥è¾…åŠ©åŠŸèƒ½ï¼ˆæ–‡ä»¶é™„ä»¶ã€æœç´¢æºã€æ¨¡å‹é€‰æ‹©ç­‰ï¼‰
- è‡ªåŠ¨ç„¦ç‚¹ç®¡ç†å’Œé”®ç›˜å¿«æ·é”®æ”¯æŒ
- ä¸ä¸»æ¶ˆæ¯è¾“å…¥æ¡†çš„å·®å¼‚åŒ–æ ·å¼è®¾è®¡

## é¡¹ç›®ç»“æ„

EmptyChatMessageInput ç»„ä»¶ä½äºç»„ä»¶ç›®å½•ä¸­ï¼Œä¸å…¶å®ƒèŠå¤©ç›¸å…³ç»„ä»¶å…±åŒæ„æˆå®Œæ•´çš„èŠå¤©ç•Œé¢ç”Ÿæ€ç³»ç»Ÿï¼š

```mermaid
graph TB
subgraph "èŠå¤©ç»„ä»¶å±‚æ¬¡ç»“æ„"
EmptyChatMessageInput["EmptyChatMessageInput<br/>ç©ºèŠå¤©è¾“å…¥æ¡†"]
MessageInput["MessageInput<br/>ä¸»æ¶ˆæ¯è¾“å…¥æ¡†"]
subgraph "è¾“å…¥åŠ¨ä½œç»„ä»¶"
Attach["Attach<br/>æ–‡ä»¶é™„ä»¶"]
Sources["Sources<br/>æœç´¢æº"]
Optimization["Optimization<br/>ä¼˜åŒ–æ¨¡å¼"]
ChatModelSelector["ChatModelSelector<br/>æ¨¡å‹é€‰æ‹©å™¨"]
end
subgraph "å®¹å™¨ç»„ä»¶"
EmptyChat["EmptyChat<br/>ç©ºèŠå¤©é¡µé¢"]
ChatWindow["ChatWindow<br/>èŠå¤©çª—å£"]
end
end
EmptyChatMessageInput --> Attach
EmptyChatMessageInput --> Sources
EmptyChatMessageInput --> Optimization
EmptyChatMessageInput --> ChatModelSelector
EmptyChat --> EmptyChatMessageInput
ChatWindow --> MessageInput
```

**å›¾è¡¨æ¥æº**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L1-L89)
- [src/components/EmptyChat.tsx](file://src/components/EmptyChat.tsx#L1-L76)
- [src/components/MessageInput.tsx](file://src/components/MessageInput.tsx#L1-L103)

**ç« èŠ‚æ¥æº**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L1-L89)
- [src/components/EmptyChat.tsx](file://src/components/EmptyChat.tsx#L1-L76)
- [src/components/MessageInput.tsx](file://src/components/MessageInput.tsx#L1-L103)

## æ ¸å¿ƒç»„ä»¶

EmptyChatMessageInput ç»„ä»¶æ˜¯ä¸“é—¨ä¸ºæ— å†å²è®°å½•åœºæ™¯è®¾è®¡çš„æ¶ˆæ¯è¾“å…¥ç»„ä»¶ï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š

### ä¸»è¦åŠŸèƒ½ç‰¹æ€§
- **è‡ªåŠ¨ç„¦ç‚¹ç®¡ç†**ï¼šç»„ä»¶æŒ‚è½½æ—¶è‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†
- **é”®ç›˜å¿«æ·é”®æ”¯æŒ**ï¼šæ”¯æŒ "/" é”®å¿«é€Ÿæ¿€æ´»è¾“å…¥
- **ç®€åŒ–å¸ƒå±€è®¾è®¡**ï¼šé‡‡ç”¨åœ†è§’çŸ©å½¢èƒŒæ™¯å’Œå†…è¾¹è·è®¾è®¡
- **é›†æˆè¾“å…¥è¾…åŠ©**ï¼šåŒ…å«æ–‡ä»¶é™„ä»¶ã€æœç´¢æºã€æ¨¡å‹é€‰æ‹©ç­‰åŠŸèƒ½
- **ç¦ç”¨çŠ¶æ€æ§åˆ¶**ï¼šå½“è¾“å…¥ä¸ºç©ºæ—¶å‘é€æŒ‰é’®ç¦ç”¨

### æ ·å¼è®¾è®¡ç‰¹ç‚¹
- ä½¿ç”¨æµ…è‰²å’Œæ·±è‰²ä¸»é¢˜çš„äºŒçº§èƒŒæ™¯è‰²
- åœ†è§’çŸ©å½¢è®¾è®¡ï¼Œæä¾›æŸ”å’Œçš„è§†è§‰æ•ˆæœ
- å†…è¾¹è·å’Œå¤–è¾¹è·çš„ç²¾å¿ƒè°ƒæ•´
- è¾¹æ¡†å’Œé˜´å½±æ•ˆæœå¢å¼ºå±‚æ¬¡æ„Ÿ

**ç« èŠ‚æ¥æº**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L10-L89)

## æ¶æ„æ¦‚è§ˆ

EmptyChatMessageInput åœ¨æ•´ä¸ªèŠå¤©ç³»ç»Ÿä¸­çš„ä½ç½®å’Œä½œç”¨ï¼š

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant EmptyChat as EmptyChat
participant EmptyInput as EmptyChatMessageInput
participant ChatHook as useChat Hook
participant API as åç«¯API
User->>EmptyChat : è®¿é—®èŠå¤©é¡µé¢
EmptyChat->>EmptyChat : æ£€æŸ¥æ¶ˆæ¯å†å²
EmptyChat->>EmptyInput : æ¸²æŸ“ç©ºèŠå¤©è¾“å…¥æ¡†
EmptyInput->>EmptyInput : è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
User->>EmptyInput : è¾“å…¥æ¶ˆæ¯
User->>EmptyInput : ç‚¹å‡»å‘é€æŒ‰é’®
EmptyInput->>ChatHook : è°ƒç”¨ sendMessage
ChatHook->>API : å‘é€æ¶ˆæ¯è¯·æ±‚
API-->>ChatHook : è¿”å›å“åº”æµ
ChatHook-->>EmptyInput : æ›´æ–°æ¶ˆæ¯çŠ¶æ€
EmptyInput->>EmptyInput : æ¸…ç©ºè¾“å…¥æ¡†
```

**å›¾è¡¨æ¥æº**
- [src/components/EmptyChat.tsx](file://src/components/EmptyChat.tsx#L36-L73)
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L42-L85)
- [src/lib/hooks/useChat.tsx](file://src/lib/hooks/useChat.tsx#L714-L800)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### EmptyChatMessageInput ç»„ä»¶è¯¦è§£

#### ç»„ä»¶ç»“æ„åˆ†æ

```mermaid
classDiagram
class EmptyChatMessageInput {
+useState message : string
+useRef inputRef : HTMLTextAreaElement
+useEffect keyboardListener
+handleSubmit(e) void
+handleKeyDown(e) void
+render() JSX.Element
}
class MessageInputActions {
<<interface>>
+Attach : Component
+Sources : Component
+Optimization : Component
+ChatModelSelector : Component
}
class useChatHook {
+sendMessage(message) Promise~void~
+files : File[]
+sources : string[]
+optimizationMode : string
+chatModelProvider : object
}
EmptyChatMessageInput --> MessageInputActions : ä½¿ç”¨
EmptyChatMessageInput --> useChatHook : ä¾èµ–
```

**å›¾è¡¨æ¥æº**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L10-L89)
- [src/lib/hooks/useChat.tsx](file://src/lib/hooks/useChat.tsx#L54-L62)

#### å…³é”®å®ç°ç»†èŠ‚

**é”®ç›˜äº‹ä»¶å¤„ç†æœºåˆ¶**ï¼š
- ç›‘å¬å…¨å±€é”®ç›˜äº‹ä»¶ï¼Œæ£€æµ‹ "/" é”®æŒ‰ä¸‹
- æ£€æŸ¥å½“å‰æ˜¯å¦æœ‰è¾“å…¥å…ƒç´ è·å¾—ç„¦ç‚¹
- è‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†ï¼Œæä¾›æ— ç¼çš„é”®ç›˜å¯¼èˆªä½“éªŒ

**è¡¨å•æäº¤é€»è¾‘**ï¼š
- æ”¯æŒæ ‡å‡†è¡¨å•æäº¤å’Œ Enter é”®æäº¤
- é˜²æ­¢é‡å¤æäº¤å’Œç©ºæ¶ˆæ¯å‘é€
- æäº¤åæ¸…ç©ºè¾“å…¥å†…å®¹

**æ ·å¼ç³»ç»Ÿé›†æˆ**ï¼š
- ä½¿ç”¨ Tailwind CSS ç±»åç³»ç»Ÿ
- æ”¯æŒæ·±è‰²å’Œæµ…è‰²ä¸»é¢˜åˆ‡æ¢
- å“åº”å¼è®¾è®¡é€‚é…ä¸åŒå±å¹•å°ºå¯¸

#### ä¸ä¸»æ¶ˆæ¯è¾“å…¥æ¡†çš„å·®å¼‚åŒ–è®¾è®¡

| ç‰¹æ€§ | EmptyChatMessageInput | MessageInput |
|------|----------------------|--------------|
| **å¸ƒå±€** | åœ†è§’çŸ©å½¢èƒŒæ™¯ï¼Œå†…è¾¹è·è®¾è®¡ | åœ†å½¢è¾“å…¥æ¡†ï¼ŒåŠ¨æ€é«˜åº¦è°ƒæ•´ |
| **åŠŸèƒ½** | é›†æˆå®Œæ•´è¾“å…¥è¾…åŠ©åŠŸèƒ½ | ç®€åŒ–è¾“å…¥è¾…åŠ©åŠŸèƒ½ |
| **è§¦å‘æ–¹å¼** | è‡ªåŠ¨èšç„¦ï¼Œé”®ç›˜å¿«æ·é”® | ç‚¹å‡»æˆ– Tab åˆ‡æ¢ |
| **æ ·å¼** | å¤§å·å­—ä½“ï¼Œå¼ºè°ƒå ä½ç¬¦ | å°å·å­—ä½“ï¼Œç®€æ´è®¾è®¡ |
| **ä½¿ç”¨åœºæ™¯** | æ–°èŠå¤©å¼€å§‹ï¼Œæ— å†å²è®°å½• | èŠå¤©è¿›è¡Œä¸­ |

**ç« èŠ‚æ¥æº**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L18-L85)
- [src/components/MessageInput.tsx](file://src/components/MessageInput.tsx#L16-L99)

### è¾“å…¥è¾…åŠ©ç»„ä»¶åˆ†æ

#### æ–‡ä»¶é™„ä»¶ç»„ä»¶ï¼ˆAttachï¼‰

æ–‡ä»¶é™„ä»¶ç»„ä»¶æä¾›äº†å®Œæ•´çš„æ–‡ä»¶ä¸Šä¼ å’Œç®¡ç†åŠŸèƒ½ï¼š

```mermaid
flowchart TD
Start([ç”¨æˆ·ç‚¹å‡»é™„ä»¶æŒ‰é’®]) --> CheckFiles{æ˜¯å¦æœ‰æ–‡ä»¶?}
CheckFiles --> |å¦| ShowUpload[æ˜¾ç¤ºæ–‡ä»¶ä¸Šä¼ ç•Œé¢]
CheckFiles --> |æ˜¯| ShowPopover[æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨å¼¹çª—]
ShowUpload --> ClickFile[ç”¨æˆ·é€‰æ‹©æ–‡ä»¶]
ClickFile --> UploadFiles[ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨]
UploadFiles --> UpdateState[æ›´æ–°æ–‡ä»¶çŠ¶æ€]
ShowPopover --> AddMore[æ·»åŠ æ›´å¤šæ–‡ä»¶]
ShowPopover --> ClearAll[æ¸…é™¤æ‰€æœ‰æ–‡ä»¶]
ShowPopover --> ClosePopover[å…³é—­å¼¹çª—]
UpdateState --> ShowPopover
AddMore --> ClickFile
ClearAll --> ResetState[é‡ç½®æ–‡ä»¶åˆ—è¡¨]
ResetState --> ShowUpload
ClosePopover --> End([å®Œæˆ])
```

**å›¾è¡¨æ¥æº**
- [src/components/MessageInputActions/Attach.tsx](file://src/components/MessageInputActions/Attach.tsx#L28-L54)

#### æœç´¢æºç»„ä»¶ï¼ˆSourcesï¼‰

æœç´¢æºç»„ä»¶å…è®¸ç”¨æˆ·é€‰æ‹©ä¸åŒçš„æœç´¢æ¥æºï¼š

| æœç´¢æºç±»å‹ | å›¾æ ‡ | åŠŸèƒ½æè¿° |
|------------|------|----------|
| Web | ğŸŒ | ç½‘ç»œæœç´¢ï¼Œè·å–å…¬å¼€ä¿¡æ¯ |
| Academic | ğŸ“š | å­¦æœ¯èµ„æºï¼Œä¸“ä¸šæ–‡çŒ®æ•°æ®åº“ |
| Social | ğŸŒ | ç¤¾äº¤åª’ä½“ï¼Œè®¨è®ºå’Œè§‚ç‚¹åˆ†äº« |

#### ä¼˜åŒ–æ¨¡å¼ç»„ä»¶ï¼ˆOptimizationï¼‰

æä¾›ä¸‰ç§ä¸åŒçš„æœç´¢ä¼˜åŒ–æ¨¡å¼ï¼š

| æ¨¡å¼ | å›¾æ ‡ | æè¿° | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| Speed | âš¡ | ä¼˜å…ˆé€Ÿåº¦ï¼Œå¿«é€Ÿå“åº” | éœ€è¦å³æ—¶ç­”æ¡ˆçš„åœºæ™¯ |
| Balanced | âœ… | å¹³è¡¡é€Ÿåº¦å’Œå‡†ç¡®æ€§ | ä¸€èˆ¬æŸ¥è¯¢éœ€æ±‚ |
| Quality | ğŸŒŸ | æœ€é«˜å‡†ç¡®æ€§ï¼Œè¯¦ç»†åˆ†æ | é‡è¦å†³ç­–æˆ–æ·±åº¦ç ”ç©¶ |

**ç« èŠ‚æ¥æº**
- [src/components/MessageInputActions/Attach.tsx](file://src/components/MessageInputActions/Attach.tsx#L28-L166)
- [src/components/MessageInputActions/Sources.tsx](file://src/components/MessageInputActions/Sources.tsx#L15-L31)
- [src/components/MessageInputActions/Optimization.tsx](file://src/components/MessageInputActions/Optimization.tsx#L13-L37)

### ä½¿ç”¨åœºæ™¯å’Œæ—¶æœº

#### ä½•æ—¶ä½¿ç”¨ EmptyChatMessageInput

1. **æ–°èŠå¤©å¼€å§‹**ï¼šç”¨æˆ·é¦–æ¬¡è®¿é—®èŠå¤©åŠŸèƒ½
2. **èŠå¤©å†å²æ¸…ç©º**ï¼šç”¨æˆ·åˆ é™¤æ‰€æœ‰èŠå¤©è®°å½•
3. **é”™è¯¯æ¢å¤**ï¼šèŠå¤©è¿æ¥å¤±è´¥åçš„é‡è¯•åœºæ™¯
4. **åˆå§‹åŒ–çŠ¶æ€**ï¼šåº”ç”¨å¯åŠ¨æ—¶çš„é»˜è®¤çŠ¶æ€

#### ä¸ ChatWindow çš„é›†æˆ

```mermaid
flowchart TD
ChatWindow[ChatWindow ç»„ä»¶] --> CheckMessages{æ£€æŸ¥æ¶ˆæ¯æ•°é‡}
CheckMessages --> |å¤§äº0| RenderChat[æ¸²æŸ“ Chat ç»„ä»¶]
CheckMessages --> |ç­‰äº0| RenderEmptyChat[æ¸²æŸ“ EmptyChat ç»„ä»¶]
RenderEmptyChat --> EmptyChat[EmptyChat ç»„ä»¶]
EmptyChat --> EmptyChatMessageInput[EmptyChatMessageInput ç»„ä»¶]
RenderChat --> MessageInput[MessageInput ç»„ä»¶]
EmptyChatMessageInput --> useChatHook[useChat Hook]
MessageInput --> useChatHook
```

**å›¾è¡¨æ¥æº**
- [src/components/ChatWindow.tsx](file://src/components/ChatWindow.tsx#L54-L68)

**ç« èŠ‚æ¥æº**
- [src/components/ChatWindow.tsx](file://src/components/ChatWindow.tsx#L36-L73)

## ä¾èµ–å…³ç³»åˆ†æ

### ç»„ä»¶é—´ä¾èµ–å…³ç³»

```mermaid
graph TB
subgraph "EmptyChatMessageInput ä¾èµ–å›¾"
EmptyInput[EmptyChatMessageInput]
subgraph "è¾“å…¥åŠ¨ä½œä¾èµ–"
AttachDep[Attach]
SourcesDep[Sources]
OptDep[Optimization]
ModelSel[ChatModelSelector]
end
subgraph "Hook ä¾èµ–"
useChat[useChat Hook]
end
subgraph "å¤–éƒ¨ä¾èµ–"
Textarea[TextareaAutosize]
Lucide[Lucide Icons]
end
end
EmptyInput --> AttachDep
EmptyInput --> SourcesDep
EmptyInput --> OptDep
EmptyInput --> ModelSel
EmptyInput --> useChat
EmptyInput --> Textarea
EmptyInput --> Lucide
```

**å›¾è¡¨æ¥æº**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L1-L8)
- [src/lib/hooks/useChat.tsx](file://src/lib/hooks/useChat.tsx#L1-L20)

### æ•°æ®æµåˆ†æ

```mermaid
sequenceDiagram
participant UI as ç”¨æˆ·ç•Œé¢
participant Hook as useChat Hook
participant Server as æœåŠ¡å™¨
participant State as ç»„ä»¶çŠ¶æ€
UI->>Hook : sendMessage(message)
Hook->>Server : POST /api/chat
Server-->>Hook : SSE æµæ•°æ®
Hook->>State : æ›´æ–°æ¶ˆæ¯çŠ¶æ€
State->>UI : é‡æ–°æ¸²æŸ“ç»„ä»¶
Note over Hook,State : å®æ—¶æ•°æ®åŒæ­¥æœºåˆ¶
```

**å›¾è¡¨æ¥æº**
- [src/lib/hooks/useChat.tsx](file://src/lib/hooks/useChat.tsx#L714-L800)

**ç« èŠ‚æ¥æº**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L1-L8)
- [src/lib/hooks/useChat.tsx](file://src/lib/hooks/useChat.tsx#L1-L20)

## æ€§èƒ½è€ƒè™‘

### ä¼˜åŒ–ç­–ç•¥

1. **æ‡’åŠ è½½è®¾è®¡**ï¼šä»…åœ¨éœ€è¦æ—¶åŠ è½½ç›¸å…³ç»„ä»¶
2. **å†…å­˜ç®¡ç†**ï¼šåŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å’Œå®šæ—¶å™¨
3. **æ¸²æŸ“ä¼˜åŒ–**ï¼šä½¿ç”¨ React.memo å’Œ useMemo ä¼˜åŒ–é‡æ¸²æŸ“
4. **ç½‘ç»œä¼˜åŒ–**ï¼šå®ç°æ™ºèƒ½ç¼“å­˜å’Œé”™è¯¯é‡è¯•æœºåˆ¶

### é”®ç›˜äº¤äº’ä¼˜åŒ–

- **é˜²æŠ–å¤„ç†**ï¼šé¿å…é¢‘ç¹çš„é”®ç›˜äº‹ä»¶è§¦å‘
- **ç„¦ç‚¹ç®¡ç†**ï¼šæ™ºèƒ½çš„ç„¦ç‚¹åˆ‡æ¢å’Œæ¢å¤
- **æ— éšœç¢æ”¯æŒ**ï¼šå®Œæ•´çš„é”®ç›˜å¯¼èˆªæ”¯æŒ

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**é—®é¢˜1ï¼šè¾“å…¥æ¡†æ— æ³•è‡ªåŠ¨èšç„¦**
- æ£€æŸ¥æµè§ˆå™¨æƒé™è®¾ç½®
- ç¡®è®¤ç»„ä»¶å·²æ­£ç¡®æŒ‚è½½
- éªŒè¯ useEffect ä¾èµ–æ•°ç»„é…ç½®

**é—®é¢˜2ï¼šé”®ç›˜å¿«æ·é”®æ— æ•ˆ**
- ç¡®è®¤å…¨å±€é”®ç›˜äº‹ä»¶ç›‘å¬å™¨æ­£å¸¸å·¥ä½œ
- æ£€æŸ¥ activeElement çš„æ­£ç¡®æ€§
- éªŒè¯è¾“å…¥å…ƒç´ çš„ contenteditable å±æ€§

**é—®é¢˜3ï¼šå‘é€æŒ‰é’®å§‹ç»ˆç¦ç”¨**
- æ£€æŸ¥ message çŠ¶æ€çš„æ›´æ–°é€»è¾‘
- ç¡®è®¤ trim() æ–¹æ³•çš„æ­£ç¡®ä½¿ç”¨
- éªŒè¯æ¡ä»¶æ¸²æŸ“é€»è¾‘

**ç« èŠ‚æ¥æº**
- [src/components/EmptyChatMessageInput.tsx](file://src/components/EmptyChatMessageInput.tsx#L18-L40)

## ç»“è®º

EmptyChatMessageInput ç»„ä»¶é€šè¿‡å…¶ä¸“é—¨åŒ–çš„è®¾è®¡å’Œä¸°å¯Œçš„åŠŸèƒ½é›†ï¼Œä¸ºæ— å†å²è®°å½•çš„èŠå¤©åœºæ™¯æä¾›äº†ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒã€‚è¯¥ç»„ä»¶ä¸ä¸»æ¶ˆæ¯è¾“å…¥æ¡†å½¢æˆäº†æ¸…æ™°çš„åŠŸèƒ½åˆ†å±‚ï¼Œç¡®ä¿äº†åœ¨ä¸åŒä½¿ç”¨åœºæ™¯ä¸‹éƒ½èƒ½æä¾›æœ€ä½³çš„äº¤äº’ä½“éªŒã€‚

ç»„ä»¶çš„ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š
- **åœºæ™¯ç‰¹å®šè®¾è®¡**ï¼šé’ˆå¯¹ç©ºèŠå¤©åœºæ™¯çš„ä¸“é—¨ä¼˜åŒ–
- **åŠŸèƒ½å®Œæ•´æ€§**ï¼šé›†æˆå¤šç§è¾“å…¥è¾…åŠ©åŠŸèƒ½
- **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼šè‡ªåŠ¨ç„¦ç‚¹ç®¡ç†å’Œé”®ç›˜å¿«æ·é”®æ”¯æŒ
- **å¯æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–çš„ç»„ä»¶è®¾è®¡ä¾¿äºç»´æŠ¤å’Œæ‰©å±•

é€šè¿‡åˆç†ä½¿ç”¨è¯¥ç»„ä»¶ï¼Œå¼€å‘è€…å¯ä»¥ä¸ºç”¨æˆ·æä¾›æ›´åŠ ç›´è§‚å’Œé«˜æ•ˆçš„èŠå¤©ä½“éªŒï¼Œç‰¹åˆ«æ˜¯åœ¨åº”ç”¨çš„åˆå§‹ä½¿ç”¨é˜¶æ®µã€‚